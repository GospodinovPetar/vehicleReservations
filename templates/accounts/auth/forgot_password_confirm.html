{% extends "base.html" %}
{% block content %}
<div class="container mt-4" style="max-width:500px">
  <h2>Reset password</h2>
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
  <form method="post" novalidate>
    {% csrf_token %}
    {{ form.email }} {# hidden field #}
    <div class="mb-3">
      <label for="id_code" class="form-label">Code from email</label>
      {{ form.code|add_class:"form-control" }}
      <div class="form-text">Enter the code we sent to your email.</div>
      {% for e in form.code.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
    </div>
    <div class="mb-3">
      <label for="id_new_password" class="form-label">New password</label>
      {{ form.new_password|add_class:"form-control" }}
      {% for e in form.new_password.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
    </div>
    <div class="mb-3">
      <label for="id_new_password_confirm" class="form-label">Confirm new password</label>
      {{ form.new_password_confirm|add_class:"form-control" }}
      {% for e in form.new_password_confirm.errors %}<div class="text-danger small">{{ e }}</div>{% endfor %}
    </div>
    <div class="mb-3">
      <label for="id_email_visible" class="form-label">Email</label>
      <input id="id_email_visible" class="form-control" type="email" value="{{ form.email.value|default:'' }}" oninput="document.getElementById('id_email').value=this.value">
      <div class="form-text">We use this to match your code.</div>
    </div>
    <button class="btn btn-primary" type="submit">Change password</button>
  </form>
</div>
{% endblock %}
